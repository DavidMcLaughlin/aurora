{"responseCode":1,"serverInfo":{"clusterName":"atla","statsUrlPrefix":"https://observe.twitter.biz/viz/dashboards/mesos-container-stats?zone=atla#source=sd."},"result":{"populateJobResult":null,"scheduleStatusResult":null,"getJobsResult":null,"getQuotaResult":null,"listBackupsResult":null,"startMaintenanceResult":null,"drainHostsResult":null,"queryRecoveryResult":null,"maintenanceStatusResult":null,"endMaintenanceResult":null,"roleSummaryResult":null,"jobSummaryResult":null,"configSummaryResult":null,"getPendingReasonResult":null,"startJobUpdateResult":null,"getJobUpdateSummariesResult":null,"getJobUpdateDetailsResult":{"details":null,"detailsList":[{"update":{"summary":{"key":{"job":{"role":"adsrtt","environment":"prod","name":"index_server-rtt"},"id":"8824fa97-b3c3-45af-bdfd-3282d33895df"},"user":"zgong","state":{"status":0,"createdTimestampMs":1498628018614,"lastModifiedTimestampMs":1498628023937},"metadata":[{"key":"org.apache.aurora.client.update_id","value":"1b75833b-e9ee-4047-86cc-ac5b687bec64"}]},"instructions":{"initialState":[{"task":{"job":{"role":"adsrtt","environment":"prod","name":"index_server-rtt"},"owner":{"user":"zgong"},"isService":true,"numCpus":0,"ramMb":0,"diskMb":0,"priority":0,"maxTaskFailures":1,"production":true,"tier":"preferred","resources":[{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"heapdump","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"yourkit","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"thrift_port","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":10240,"namedPort":null,"numGpus":null},{"numCpus":12,"ramMb":null,"diskMb":null,"namedPort":null,"numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"http","numGpus":null},{"numCpus":null,"ramMb":24576,"diskMb":null,"namedPort":null,"numGpus":null}],"constraints":[{"name":"host","constraint":{"value":null,"limit":{"limit":1}}},{"name":"rack","constraint":{"value":null,"limit":{"limit":2}}},{"name":"os","constraint":{"value":{"negated":false,"values":["centos7"]},"limit":null}}],"requestedPorts":[],"mesosFetcherUris":[],"taskLinks":{"http":"http://%host%:%port:http%"},"contactEmail":"ads-serving-team@twitter.com","executorConfig":{"name":"AuroraExecutor","data":"{\"environment\": \"prod\", \"health_check_config\": {\"health_checker\": {\"http\": {\"expected_response_code\": 0, \"endpoint\": \"/health\", \"expected_response\": \"ok\"}}, \"min_consecutive_successes\": 1, \"initial_interval_secs\": 240.0, \"max_consecutive_failures\": 1, \"timeout_secs\": 1.0, \"interval_secs\": 30.0}, \"name\": \"index_server-rtt\", \"service\": true, \"max_task_failures\": 1, \"cron_collision_policy\": \"KILL_EXISTING\", \"enable_hooks\": true, \"cluster\": \"atla\", \"task\": {\"processes\": [{\"daemon\": false, \"name\": \"stage_index_server-rtt\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache 20186a2b0503d146d8565fca3dbddf33 hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/20/186a2b0503d146d8565fca3dbddf33 index_server.zip\\n\\nfunction _delete_pkg() { rm -f index_server.zip; }\\n\\nif [[ \\\"index_server.zip\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".tar.gz\\\" || \\\"index_server.zip\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".tar.bz2\\\" || \\\"index_server.zip\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".shar\\\" ]]; then\\n  sh index_server.zip && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"stage_jemalloc\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache 5ca1d37a432c88d9ef2a2d3cbec3cb7e hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/5c/a1d37a432c88d9ef2a2d3cbec3cb7e libjemalloc.so.withprof\\n\\nfunction _delete_pkg() { rm -f libjemalloc.so.withprof; }\\n\\nif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar.gz\\\" || \\\"libjemalloc.so.withprof\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar.bz2\\\" || \\\"libjemalloc.so.withprof\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".shar\\\" ]]; then\\n  sh libjemalloc.so.withprof && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"stage_yourkit\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache 5980daa308ae696df3bceb40a2aca570 hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/59/80daa308ae696df3bceb40a2aca570 yjp-2016.02-b40-linux.tar.bz2\\n\\nfunction _delete_pkg() { rm -f yjp-2016.02-b40-linux.tar.bz2; }\\n\\nif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar.gz\\\" || \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar.bz2\\\" || \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".shar\\\" ]]; then\\n  sh yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"extract_yourkit\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"mv yjp-* yjp\", \"final\": false}, {\"daemon\": false, \"name\": \"allocate_yourkit_port\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"echo {{thermos.ports[yourkit]}} > yourkit.port\", \"final\": false}, {\"daemon\": true, \"name\": \"heapdumpweb_heapdump\", \"ephemeral\": true, \"max_failures\": 10, \"min_duration\": 5, \"cmdline\": \"if [[ ! -x heap_dumper_web.pex ]]; then /usr/local/bin/package_cache 656a8cda3dd5ee85efd7048f3308a3f4 hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/65/6a8cda3dd5ee85efd7048f3308a3f4 heap_dumper_web.zip && unzip -qo heap_dumper_web.zip && rm -f heap_dumper_web.zip && chmod +x heap_dumper_web.pex; fi && ./heap_dumper_web.pex -f index_server-rtt-jvmprocess.pid -s ./.healthchecksnooze --port {{thermos.ports[heapdump]}}\", \"final\": false}, {\"daemon\": false, \"name\": \"index_server-rtt\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"\\nexport AURORA_JOB_NAME=index_server-rtt      PATH=/usr/lib/jvm/java-1.8.0-twitter/bin:$PATH      SHARD_ID=\\\"$(({{mesos.instance}} + 0))\\\" LD_PRELOAD=\\\"$PWD/libjemalloc.so.withprof\\\" ROOT_DIR=\\\"./\\\" SERVICE_ACCOUNT=\\\"adsrtt\\\"      JAVA_HOME=/usr/lib/jvm/java-1.8.0-twitter      __JVM_OPTIONS=\\\"-Xmx23552M -Xms23552M -Xmn5632M\\n                    -XX:MaxMetaspaceSize=128M -XX:MetaspaceSize=128M  \\n                   -XX:ParallelGCThreads=10 -Xloggc:gc.log\\n                   -XX:+CMSScavengeBeforeRemark -XX:TargetSurvivorRatio=90 -XX:+PrintCommandLineFlags -verbosegc -XX:NumberOfGCLogFiles=2 -XX:GCLogFileSize=64M -XX:+UseGCLogFileRotation -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintGCCause -XX:+PrintPromotionFailure -XX:+PrintTenuringDistribution -XX:+PrintHeapAtGC\\n                   -XX:+HeapDumpOnOutOfMemoryError\\n                   -Dmesos.resources.cpu=12\\n                   -XX:+UseConcMarkSweepGC -agentlib:perfagent\\n                   -XX:-OmitStackTraceInFastThrow -XX:SurvivorRatio=16 -XX:+UseAllocationProfiling -XX:+UseTenuringProfiling -XX:+UseParNewGC -XX:CICompilerCount=9  -Daurora.instanceKey=atla/adsrtt/prod/index_server-rtt/{{mesos.instance}}\\\"\\necho $$ > index_server-rtt-jvmprocess.pid &&\\necho $$ > index_server-rtt-jvmcollector.pid &&\\nexec /usr/lib/jvm/java-1.8.0-twitter/bin/java $__JVM_OPTIONS -server -Djava.util.logging.manager=com.twitter.common.util.logging.UnresettableLogManager -Djava.util.logging.config.file=\\\"config/index_server/production_logging.properties\\\" -cp index_server.jar com.twitter.ads.index_server.main.IndexServerApp -service_ids=\\\"production:index_server-rtt\\\" -http_port={{thermos.ports[http]}} -http_announce_port_names=http,aurora -thrift_port={{thermos.ports[thrift_port]}} -stat_sampling_interval=60secs -shard_id=\\\"$SHARD_ID\\\" -zone=atla -config=config/index_server/production.atla.conf -use_case=rtt -task_id={{mesos.instance}} 1>index_server.stdout.log 2>index_server.stderr.log\", \"final\": false}, {\"daemon\": true, \"name\": \"stats_science_http\", \"ephemeral\": true, \"max_failures\": 10, \"min_duration\": 5, \"cmdline\": \"CLUSTER=atla && case $CLUSTER in atla*) ZONE=atla;; smf1*) ZONE=smf1;; *) ZONE=$CLUSTER;; esac && case $ZONE in atla) MODE=\\\"\\\" RELAYS=\\\"\\\";; atlb) MODE=\\\"-mode=external\\\" RELAYS=\\\"-relays=cuckoo-relay-atla.twitter.biz\\\";; smf1) MODE=\\\"\\\" RELAYS=\\\"\\\";; *) MODE=\\\"-mode=oauth_pop\\\" RELAYS=\\\"-relays=monitoring.twitter.biz\\\";; esac && flock -x -w 11.0 absorber.lock -c \\\"if [[ ! -x absorber ]]; then /usr/local/bin/package_cache 2b6bbbfdaed15722b4b275f15731f03c hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/2b/6bbbfdaed15722b4b275f15731f03c absorber && for i in 1 2 3; do if [[ ! -e absorber ]]; then sleep 5 && /usr/local/bin/package_cache 2b6bbbfdaed15722b4b275f15731f03c hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/2b/6bbbfdaed15722b4b275f15731f03c absorber; else break; fi; done && chmod +x absorber && ( ./absorber -help >/dev/null 2>&1 || /bin/true ); fi\\\" && ./absorber -pull -env=prod -job=index_server-rtt -logfile=absorber_science_http.log ${MODE} -pulllibrary=science -pullport={{thermos.ports[http]}} -role=adsrtt -source={{mesos.instance}} ${RELAYS} -zone=${ZONE} \", \"final\": false}], \"name\": \"install_and_run_index_server\", \"finalization_wait\": 30, \"max_failures\": 1, \"max_concurrency\": 0, \"resources\": {\"gpu\": 0, \"disk\": 10737418240, \"ram\": 25769803776, \"cpu\": 12.0}, \"constraints\": [{\"order\": [\"stage_index_server-rtt\", \"stage_jemalloc\", \"stage_yourkit\", \"extract_yourkit\", \"allocate_yourkit_port\", \"index_server-rtt\"]}]}, \"production\": true, \"role\": \"adsrtt\", \"contact\": \"ads-serving-team@twitter.com\", \"tier\": \"preferred\", \"announce\": {\"primary_port\": \"thrift_port\", \"portmap\": {\"aurora\": \"thrift_port\"}}, \"constraints\": {\"host\": \"limit:1\", \"os\": \"centos7\", \"rack\": \"limit:2\"}, \"lifecycle\": {\"http\": {\"graceful_shutdown_endpoint\": \"/quitquitquit\", \"port\": \"health\", \"shutdown_endpoint\": \"/abortabortabort\"}}, \"priority\": 0}"},"metadata":[{"key":"package","value":"ads/jemalloc version:1"},{"key":"package","value":"ads/yourkit version:3"},{"key":"package","value":"observe/absorber-release version:99 universion:v94 gitsha:f11d7725b4b503217472957c7e229bf62cb2b8f6 repo:https://git.twitter.biz/ro/source branch:origin/master"},{"key":"package","value":"heapdumper/heap_dumper_web version:3 universion:v1"},{"key":"package","value":"adsrtt/index_server-rtt version:14"}],"container":{"mesos":{"image":null,"volumes":[]},"docker":null}},"instances":[{"first":209,"last":209},{"first":188,"last":188},{"first":204,"last":204},{"first":45,"last":45},{"first":142,"last":142},{"first":107,"last":107},{"first":190,"last":190},{"first":152,"last":152},{"first":35,"last":35},{"first":186,"last":186}]}],"desiredState":{"task":{"job":{"role":"adsrtt","environment":"prod","name":"index_server-rtt"},"owner":{"user":"zgong"},"isService":true,"numCpus":0,"ramMb":0,"diskMb":0,"priority":0,"maxTaskFailures":1,"production":true,"tier":"preferred","resources":[{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"heapdump","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"yourkit","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"thrift_port","numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":10240,"namedPort":null,"numGpus":null},{"numCpus":12,"ramMb":null,"diskMb":null,"namedPort":null,"numGpus":null},{"numCpus":null,"ramMb":null,"diskMb":null,"namedPort":"http","numGpus":null},{"numCpus":null,"ramMb":24576,"diskMb":null,"namedPort":null,"numGpus":null}],"constraints":[{"name":"host","constraint":{"value":null,"limit":{"limit":1}}},{"name":"rack","constraint":{"value":null,"limit":{"limit":2}}},{"name":"os","constraint":{"value":{"negated":false,"values":["centos7"]},"limit":null}}],"requestedPorts":[],"mesosFetcherUris":[],"taskLinks":{"http":"http://%host%:%port:http%"},"contactEmail":"ads-serving-team@twitter.com","executorConfig":{"name":"AuroraExecutor","data":"{\"environment\": \"prod\", \"health_check_config\": {\"health_checker\": {\"http\": {\"expected_response_code\": 0, \"endpoint\": \"/health\", \"expected_response\": \"ok\"}}, \"min_consecutive_successes\": 1, \"initial_interval_secs\": 120.0, \"max_consecutive_failures\": 1, \"timeout_secs\": 1.0, \"interval_secs\": 30.0}, \"name\": \"index_server-rtt\", \"service\": true, \"max_task_failures\": 1, \"cron_collision_policy\": \"KILL_EXISTING\", \"enable_hooks\": true, \"cluster\": \"atla\", \"task\": {\"processes\": [{\"daemon\": false, \"name\": \"stage_index_server-rtt\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache b0aee7b7dfb53c1bfe30ca5dd0b5bf7f hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/b0/aee7b7dfb53c1bfe30ca5dd0b5bf7f index_server.zip\\n\\nfunction _delete_pkg() { rm -f index_server.zip; }\\n\\nif [[ \\\"index_server.zip\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".tar.gz\\\" || \\\"index_server.zip\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".tar.bz2\\\" || \\\"index_server.zip\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo index_server.zip && _delete_pkg\\nelif [[ \\\"index_server.zip\\\" == *\\\".shar\\\" ]]; then\\n  sh index_server.zip && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"stage_jemalloc\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache 5ca1d37a432c88d9ef2a2d3cbec3cb7e hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/5c/a1d37a432c88d9ef2a2d3cbec3cb7e libjemalloc.so.withprof\\n\\nfunction _delete_pkg() { rm -f libjemalloc.so.withprof; }\\n\\nif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar.gz\\\" || \\\"libjemalloc.so.withprof\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".tar.bz2\\\" || \\\"libjemalloc.so.withprof\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo libjemalloc.so.withprof && _delete_pkg\\nelif [[ \\\"libjemalloc.so.withprof\\\" == *\\\".shar\\\" ]]; then\\n  sh libjemalloc.so.withprof && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"stage_yourkit\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"/usr/local/bin/package_cache 5980daa308ae696df3bceb40a2aca570 hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/59/80daa308ae696df3bceb40a2aca570 yjp-2016.02-b40-linux.tar.bz2\\n\\nfunction _delete_pkg() { rm -f yjp-2016.02-b40-linux.tar.bz2; }\\n\\nif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar\\\" ]]; then\\n  tar -xf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar.gz\\\" || \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tgz\\\" ]]; then\\n  tar -xzf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tar.bz2\\\" || \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".tbz2\\\" ]]; then\\n  tar -xjf yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".zip\\\" ]]; then\\n  unzip -qo yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nelif [[ \\\"yjp-2016.02-b40-linux.tar.bz2\\\" == *\\\".shar\\\" ]]; then\\n  sh yjp-2016.02-b40-linux.tar.bz2 && _delete_pkg\\nfi\\n\", \"final\": false}, {\"daemon\": false, \"name\": \"extract_yourkit\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"mv yjp-* yjp\", \"final\": false}, {\"daemon\": false, \"name\": \"allocate_yourkit_port\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"echo {{thermos.ports[yourkit]}} > yourkit.port\", \"final\": false}, {\"daemon\": true, \"name\": \"heapdumpweb_heapdump\", \"ephemeral\": true, \"max_failures\": 10, \"min_duration\": 5, \"cmdline\": \"if [[ ! -x heap_dumper_web.pex ]]; then /usr/local/bin/package_cache 656a8cda3dd5ee85efd7048f3308a3f4 hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/65/6a8cda3dd5ee85efd7048f3308a3f4 heap_dumper_web.zip && unzip -qo heap_dumper_web.zip && rm -f heap_dumper_web.zip && chmod +x heap_dumper_web.pex; fi && ./heap_dumper_web.pex -f index_server-rtt-jvmprocess.pid -s ./.healthchecksnooze --port {{thermos.ports[heapdump]}}\", \"final\": false}, {\"daemon\": false, \"name\": \"index_server-rtt\", \"ephemeral\": false, \"max_failures\": 1, \"min_duration\": 5, \"cmdline\": \"\\nexport AURORA_JOB_NAME=index_server-rtt      PATH=/usr/lib/jvm/java-1.8.0-twitter/bin:$PATH      SHARD_ID=\\\"$(({{mesos.instance}} + 0))\\\" LD_PRELOAD=\\\"$PWD/libjemalloc.so.withprof\\\" ROOT_DIR=\\\"./\\\" SERVICE_ACCOUNT=\\\"adsrtt\\\"      JAVA_HOME=/usr/lib/jvm/java-1.8.0-twitter      __JVM_OPTIONS=\\\"-Xmx23552M -Xms23552M -Xmn5632M\\n                    -XX:MaxMetaspaceSize=128M -XX:MetaspaceSize=128M  \\n                   -XX:ParallelGCThreads=10 -Xloggc:gc.log\\n                   -XX:+CMSScavengeBeforeRemark -XX:TargetSurvivorRatio=90 -XX:+PrintCommandLineFlags -verbosegc -XX:NumberOfGCLogFiles=2 -XX:GCLogFileSize=64M -XX:+UseGCLogFileRotation -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+PrintGCDateStamps -XX:+PrintGCCause -XX:+PrintPromotionFailure -XX:+PrintTenuringDistribution -XX:+PrintHeapAtGC\\n                   -XX:+HeapDumpOnOutOfMemoryError\\n                   -Dmesos.resources.cpu=12\\n                   -XX:+UseConcMarkSweepGC -agentlib:perfagent\\n                   -XX:-OmitStackTraceInFastThrow -XX:SurvivorRatio=16 -XX:+UseAllocationProfiling -XX:+UseTenuringProfiling -XX:+UseParNewGC -XX:CICompilerCount=9  -Daurora.instanceKey=atla/adsrtt/prod/index_server-rtt/{{mesos.instance}}\\\"\\necho $$ > index_server-rtt-jvmprocess.pid &&\\necho $$ > index_server-rtt-jvmcollector.pid &&\\nexec /usr/lib/jvm/java-1.8.0-twitter/bin/java $__JVM_OPTIONS -server -Djava.util.logging.manager=com.twitter.common.util.logging.UnresettableLogManager -Djava.util.logging.config.file=\\\"config/index_server/production_logging.properties\\\" -cp index_server.jar com.twitter.ads.index_server.main.IndexServerApp -service_ids=\\\"production:index_server-rtt\\\" -http_port={{thermos.ports[http]}} -http_announce_port_names=http,aurora -thrift_port={{thermos.ports[thrift_port]}} -stat_sampling_interval=60secs -shard_id=\\\"$SHARD_ID\\\" -zone=atla -config=config/index_server/production.atla.conf -use_case=rtt -task_id={{mesos.instance}} 1>index_server.stdout.log 2>index_server.stderr.log\", \"final\": false}, {\"daemon\": true, \"name\": \"stats_science_http\", \"ephemeral\": true, \"max_failures\": 10, \"min_duration\": 5, \"cmdline\": \"CLUSTER=atla && case $CLUSTER in atla*) ZONE=atla;; smf1*) ZONE=smf1;; *) ZONE=$CLUSTER;; esac && case $ZONE in atla) MODE=\\\"\\\" RELAYS=\\\"\\\";; atlb) MODE=\\\"-mode=external\\\" RELAYS=\\\"-relays=cuckoo-relay-atla.twitter.biz\\\";; smf1) MODE=\\\"\\\" RELAYS=\\\"\\\";; *) MODE=\\\"-mode=oauth_pop\\\" RELAYS=\\\"-relays=monitoring.twitter.biz\\\";; esac && flock -x -w 11.0 absorber.lock -c \\\"if [[ ! -x absorber ]]; then /usr/local/bin/package_cache 2b6bbbfdaed15722b4b275f15731f03c hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/2b/6bbbfdaed15722b4b275f15731f03c absorber && for i in 1 2 3; do if [[ ! -e absorber ]]; then sleep 5 && /usr/local/bin/package_cache 2b6bbbfdaed15722b4b275f15731f03c hftp://hadoop-rt2-nn.atla.twitter.com:50070/user/mesos/packer/atla-prod/packagedata/2b/6bbbfdaed15722b4b275f15731f03c absorber; else break; fi; done && chmod +x absorber && ( ./absorber -help >/dev/null 2>&1 || /bin/true ); fi\\\" && ./absorber -pull -env=prod -job=index_server-rtt -logfile=absorber_science_http.log ${MODE} -pulllibrary=science -pullport={{thermos.ports[http]}} -role=adsrtt -source={{mesos.instance}} ${RELAYS} -zone=${ZONE} \", \"final\": false}], \"name\": \"install_and_run_index_server\", \"finalization_wait\": 30, \"max_failures\": 1, \"max_concurrency\": 0, \"resources\": {\"gpu\": 0, \"disk\": 10737418240, \"ram\": 25769803776, \"cpu\": 12.0}, \"constraints\": [{\"order\": [\"stage_index_server-rtt\", \"stage_jemalloc\", \"stage_yourkit\", \"extract_yourkit\", \"allocate_yourkit_port\", \"index_server-rtt\"]}]}, \"production\": true, \"role\": \"adsrtt\", \"contact\": \"ads-serving-team@twitter.com\", \"tier\": \"preferred\", \"announce\": {\"primary_port\": \"thrift_port\", \"portmap\": {\"aurora\": \"thrift_port\"}}, \"constraints\": {\"host\": \"limit:1\", \"os\": \"centos7\", \"rack\": \"limit:2\"}, \"lifecycle\": {\"http\": {\"graceful_shutdown_endpoint\": \"/quitquitquit\", \"port\": \"health\", \"shutdown_endpoint\": \"/abortabortabort\"}}, \"priority\": 0}"},"metadata":[{"key":"package","value":"ads/yourkit version:3"},{"key":"package","value":"ads/jemalloc version:1"},{"key":"package","value":"observe/absorber-release version:99 universion:v94 gitsha:f11d7725b4b503217472957c7e229bf62cb2b8f6 repo:https://git.twitter.biz/ro/source branch:origin/master"},{"key":"package","value":"heapdumper/heap_dumper_web version:3 universion:v1"},{"key":"package","value":"adsrtt/index_server-rtt version:15"}],"container":{"mesos":{"image":null,"volumes":[]},"docker":null}},"instances":[{"first":188,"last":188},{"first":45,"last":45},{"first":142,"last":142},{"first":107,"last":107},{"first":190,"last":190},{"first":152,"last":152},{"first":35,"last":35},{"first":186,"last":186}]},"settings":{"updateGroupSize":10,"maxPerInstanceFailures":1,"maxFailedInstances":40,"minWaitInInstanceRunningMs":900000,"rollbackOnFailure":false,"updateOnlyTheseInstances":[{"first":209,"last":209},{"first":188,"last":188},{"first":204,"last":204},{"first":45,"last":45},{"first":142,"last":142},{"first":107,"last":107},{"first":190,"last":190},{"first":152,"last":152},{"first":35,"last":35},{"first":186,"last":186}],"waitForBatchCompletion":false,"blockIfNoPulsesAfterMs":0}}},"updateEvents":[{"status":0,"timestampMs":1498628018614,"user":"zgong","message":null}],"instanceEvents":[{"instanceId":35,"timestampMs":1498628018628,"action":3},{"instanceId":45,"timestampMs":1498628018628,"action":3},{"instanceId":107,"timestampMs":1498628018628,"action":3},{"instanceId":142,"timestampMs":1498628018628,"action":3},{"instanceId":152,"timestampMs":1498628018629,"action":3},{"instanceId":186,"timestampMs":1498628018629,"action":3},{"instanceId":188,"timestampMs":1498628018629,"action":3},{"instanceId":190,"timestampMs":1498628018629,"action":3},{"instanceId":204,"timestampMs":1498628018629,"action":3},{"instanceId":209,"timestampMs":1498628018629,"action":3},{"instanceId":209,"timestampMs":1498628023767,"action":1},{"instanceId":204,"timestampMs":1498628023937,"action":1}]}]},"pulseJobUpdateResult":null,"getJobUpdateDiffResult":null,"getTierConfigResult":null},"details":[]}